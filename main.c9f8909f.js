(self.webpackChunktodo_app=self.webpackChunktodo_app||[]).push([[179],{993:function(e,t,n){"use strict";var r=n(294),o=n(935),a=n(703),l=n(890),i=n(804),u=n(586),c="ADD_TODO",d="REMOVE_TODO",f="MARK_TODO";function s(e,t){var n=function(e,t){return e.filter((function(e){return e.parentUid===t}))}(e,t),r=e;return n.forEach((function(t){r=s(e,t.uid)})),r.reduce((function(e,n){return n.uid!==t&&e.push(n),e}),[])}function m(e,t){var n,r=null===(n=e.find((function(e){return e.uid===t})))||void 0===n?void 0:n.parentUid;return r?1+m(e,r):0}function y(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var v=[],b=(0,l.UY)({todos:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c:return[].concat(y(e),[{title:t.payload.title,parentUid:m(e,t.payload.parentUid)<2?t.payload.parentUid:void 0,uid:(0,u.Z)(),isDone:!1}]);case d:return s(e,t.payload);case f:return e.map((function(e){return e.uid===t.payload.uid&&(e.isDone=t.payload.isDone),e}));default:return e}}}),h=n(682),E=n(697),g=n.n(E),O=n(396),j=n(754),S=n(151),Z=n(971),w=n(51),A=n(555);function D(){return(D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var k=function(e){var t=e.todo,n=e.onDelete,o=e.onHide,a=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,["todo","onDelete","onHide"]);return r.createElement(Z.Z,D({},a,{animation:!1,onHide:o,centered:!0}),r.createElement(Z.Z.Header,null,r.createElement(Z.Z.Title,null,"Вы уверены, что хотите удалить элемент?")),r.createElement(Z.Z.Footer,null,r.createElement(h.Z,null,r.createElement(w.Z,null,r.createElement(A.Z,null,r.createElement(j.Z,{className:"w-100",variant:"primary",onClick:function(){null==o||o.call(void 0),null==n||n.call(void 0,t.uid)},"data-testid":"delete-todo"},"Да")),r.createElement(A.Z,null,r.createElement(j.Z,{className:"w-100",variant:"secondary",onClick:function(){return null==o?void 0:o.call(void 0)},"data-testid":"not-delete-todo"},"Нет"))))))};k.propTypes={todo:g().object,onDelete:g().func,onHide:g().func},k.defaultProps={todo:{},onDelete:function(){},onHide:function(){}};var C=k,I={onDelete:function(e){return function(e){return{type:d,payload:e}}(e)}},T=(0,a.$j)(null,I)(C);function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var x=function(e){var t,n,o=e.todo,a=e.markTodo,l=(t=(0,r.useState)(!1),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,a=void 0;try{for(var l,i=e[Symbol.iterator]();!(r=(l=i.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==i.return||i.return()}finally{if(o)throw a}}return n}}(t,n)||function(e,t){if(e){if("string"==typeof e)return U(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?U(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=l[0],u=l[1];return r.createElement(r.Fragment,null,r.createElement(h.Z,{className:"d-flex justify-content-start"},r.createElement(S.Z.Check,{"data-testid":"item",type:"checkbox",id:o.uid,label:o.title,value:o.isDone||!1,className:o.isDone?"marked":"",onClick:function(){null==a||a.call(void 0,o.uid,!o.isDone)}}),o.isDone&&r.createElement("a",{href:"#",className:"pl-2 link-primary","data-testid":"delete-link",onClick:function(e){e.preventDefault(),u(!0)}},"Удалить")),r.createElement(T,{todo:o,show:i,onHide:function(){return u(!1)}}))};x.propTypes={todo:g().object,markTodo:g().func},x.defaultProps={todo:{},markTodo:function(){}};var H=x,N={markTodo:function(e,t){return function(e,t){return{type:f,payload:{uid:e,isDone:t}}}(e,t)}},P=(0,a.$j)(null,N)(H);function M(){return(M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function $(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,a=void 0;try{for(var l,i=e[Symbol.iterator]();!(r=(l=i.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==i.return||i.return()}finally{if(o)throw a}}return n}}(e,t)||R(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){if(e){if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var F=function(e){var t=e.todos,n=e.onCreate,o=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,["todos","onCreate"]),a=$((0,r.useState)([]),2),l=a[0],i=a[1],u=$((0,r.useState)(),2),c=u[0],d=u[1],f=$((0,r.useState)(""),2),s=f[0],m=f[1];return(0,r.useEffect)((function(){var e;i([{title:"Не выбрано"}].concat(function(e){if(Array.isArray(e))return _(e)}(e=t.filter((function(e){return G(t,e.uid)<2})))||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||R(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()))}),[t]),r.createElement(Z.Z,M({},o,{animation:!1,centered:!0}),r.createElement(Z.Z.Header,null,r.createElement(Z.Z.Title,null,"Добавить элемент")),r.createElement(Z.Z.Body,null,r.createElement(S.Z,{onSubmit:function(e){e.preventDefault()}},r.createElement(S.Z.Group,{controlId:"parent-todo","data-testid":"select-parent"},r.createElement(S.Z.Row,null,r.createElement(A.Z,null,r.createElement(S.Z.Label,null,"Родительский элемент")),r.createElement(A.Z,null,r.createElement(S.Z.Control,{as:"select",value:c,onChange:function(e){d(e.target.value)}},l.map((function(e,t){var n;return r.createElement("option",{value:e.uid,key:null!==(n=e.uid)&&void 0!==n?n:t},e.title)})))))),r.createElement(S.Z.Group,{controlId:"title"},r.createElement(S.Z.Row,null,r.createElement(A.Z,null,r.createElement(S.Z.Label,null,"Заголовок")),r.createElement(A.Z,null,r.createElement(S.Z.Control,{type:"input'",defaultValue:"",onChange:function(e){return m(e.target.value)}})))))),r.createElement(Z.Z.Footer,null,r.createElement(j.Z,{variant:"primary",className:"w-100",onClick:function(){var e;null===(e=o.onHide)||void 0===e||e.call(),null==n||n.call(void 0,s,c),d(void 0)},"data-testid":"add-todo"},"Добавить")))};function G(e,t){var n,r=null===(n=e.find((function(e){return e.uid===t})))||void 0===n?void 0:n.parentUid;return r?1+G(e,r):0}F.propTypes={todos:g().array,onCreate:g().func},F.defaultProps={todos:[],onCreate:function(){}};var L=F,V={onCreate:function(e,t){return function(e,t){return{type:c,payload:{title:e,parentUid:t}}}(e,t)}},q=(0,a.$j)((function(e){return{todos:e.todos}}),V)(L);function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var B=function(e){var t,n,o=e.todos,a=(t=(0,r.useState)(!1),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,a=void 0;try{for(var l,i=e[Symbol.iterator]();!(r=(l=i.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==i.return||i.return()}finally{if(o)throw a}}return n}}(t,n)||function(e,t){if(e){if("string"==typeof e)return z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=a[0],i=a[1];return r.createElement(h.Z,{className:"d-flex flex-column justify-content-between h-100"},r.createElement(O.Z,{"data-testid":"todo-list",as:"ul"},K(o,Y(o,void 0))),r.createElement(j.Z,{"data-testid":"add-item",variant:"primary",className:"mt-3",onClick:function(){return i(!0)}},"Добавить элемент"),r.createElement(q,{show:l,onHide:function(){return i(!1)},"data-testid":"modal"}))};function K(e,t){return function(e){return e.sort((function(e,t){return e.isDone===t.isDone?0:e.isDone?1:-1}))}(t).map((function(t,n){var o,a,l,i=t.uid&&Y(e,t.uid);return r.createElement("div",{key:null!==(o=t.uid)&&void 0!==o?o:n,"data-testid":null!==(a=t.uid)&&void 0!==a?a:n},r.createElement(O.Z.Item,{as:"li",key:null!==(l=t.uid)&&void 0!==l?l:n},r.createElement(P,{isDone:t.isDone,todo:t})),i&&r.createElement("div",{className:"ml-3"},K(e,i)))}))}function Y(e,t){return e.filter((function(e){return e.parentUid===t}))}B.propTypes={todos:g().array},B.defaultProps={todos:[]};var J,Q=B,W=(0,a.$j)((function(e){return{todos:e.todos}}),null)(Q),X=(0,l.MT)(b,(0,i.nR)());J=function(){return r.createElement(h.Z,{fluid:"md",className:"vh-100 pt-2 pb-3"},r.createElement(W,null))},o.render(r.createElement(r.StrictMode,null,r.createElement(a.zt,{store:X},r.createElement(J,null))),document.querySelector("#root"))}},0,[[993,303,760]]]);