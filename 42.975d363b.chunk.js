(self.webpackChunktodo_app=self.webpackChunktodo_app||[]).push([[42],{42:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return M}});var r=n(703),o=n(294),a=n(697),l=n.n(a),i=n(682),u=n(396),c=n(754),d=n(702),f=n(151),s=n(971),m=n(51),y=n(555);function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var v=function(e){var t=e.todo,n=e.onDelete,r=e.onHide,a=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,["todo","onDelete","onHide"]);return o.createElement(s.Z,p({},a,{animation:!1,onHide:r,centered:!0}),o.createElement(s.Z.Header,null,o.createElement(s.Z.Title,null,"Вы уверены, что хотите удалить элемент?")),o.createElement(s.Z.Footer,null,o.createElement(i.default,null,o.createElement(m.Z,null,o.createElement(y.Z,null,o.createElement(c.Z,{className:"w-100",variant:"primary",onClick:function(){null==r||r.call(void 0),null==n||n.call(void 0,t.uid)},"data-testid":"delete-todo"},"Да")),o.createElement(y.Z,null,o.createElement(c.Z,{className:"w-100",variant:"secondary",onClick:function(){return null==r?void 0:r.call(void 0)},"data-testid":"not-delete-todo"},"Нет"))))))};v.propTypes={todo:l().object,onDelete:l().func,onHide:l().func},v.defaultProps={todo:{},onDelete:function(){},onHide:function(){}};var b=v,h={onDelete:function(e){return function(e){return{type:d.uz,payload:e}}(e)}},E=(0,r.$j)(null,h)(b);function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var j=function(e){var t,n,r=e.todo,a=e.markTodo,l=(t=(0,o.useState)(!1),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,a=void 0;try{for(var l,i=e[Symbol.iterator]();!(r=(l=i.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==i.return||i.return()}finally{if(o)throw a}}return n}}(t,n)||function(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=l[0],c=l[1];return o.createElement(o.Fragment,null,o.createElement(i.default,{className:"d-flex justify-content-start"},o.createElement(f.Z.Check,{"data-testid":"item",type:"checkbox",id:r.uid,label:r.title,value:r.isDone||!1,className:r.isDone?"marked":"",onClick:function(){null==a||a.call(void 0,r.uid,!r.isDone)}}),r.isDone&&o.createElement("a",{href:"#",className:"pl-2 link-primary","data-testid":"delete-link",onClick:function(e){e.preventDefault(),c(!0)}},"Удалить")),o.createElement(E,{todo:r,show:u,onHide:function(){return c(!1)}}))};j.propTypes={todo:l().object,markTodo:l().func},j.defaultProps={todo:{},markTodo:function(){}};var O=j,Z={markTodo:function(e,t){return function(e,t){return{type:d.zi,payload:{uid:e,isDone:t}}}(e,t)}},S=(0,r.$j)(null,Z)(O);function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,a=void 0;try{for(var l,i=e[Symbol.iterator]();!(r=(l=i.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==i.return||i.return()}finally{if(o)throw a}}return n}}(e,t)||A(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){if(e){if("string"==typeof e)return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?C(e,t):void 0}}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var D=function(e){var t=e.todos,n=e.onCreate,r=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,["todos","onCreate"]),a=k((0,o.useState)([]),2),l=a[0],i=a[1],u=k((0,o.useState)(),2),d=u[0],m=u[1],p=k((0,o.useState)(""),2),v=p[0],b=p[1];return(0,o.useEffect)((function(){var e;i([{title:"Не выбрано"}].concat(function(e){if(Array.isArray(e))return C(e)}(e=t.filter((function(e){return I(t,e.uid)<2})))||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||A(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()))}),[t]),o.createElement(s.Z,w({},r,{animation:!1,centered:!0}),o.createElement(s.Z.Header,null,o.createElement(s.Z.Title,null,"Добавить элемент")),o.createElement(s.Z.Body,null,o.createElement(f.Z,{onSubmit:function(e){e.preventDefault()}},o.createElement(f.Z.Group,{controlId:"parent-todo","data-testid":"select-parent"},o.createElement(f.Z.Row,null,o.createElement(y.Z,null,o.createElement(f.Z.Label,null,"Родительский элемент")),o.createElement(y.Z,null,o.createElement(f.Z.Control,{as:"select",value:d,onChange:function(e){m(e.target.value)}},l.map((function(e,t){var n;return o.createElement("option",{value:e.uid,key:null!==(n=e.uid)&&void 0!==n?n:t},e.title)})))))),o.createElement(f.Z.Group,{controlId:"title"},o.createElement(f.Z.Row,null,o.createElement(y.Z,null,o.createElement(f.Z.Label,null,"Заголовок")),o.createElement(y.Z,null,o.createElement(f.Z.Control,{type:"input'",defaultValue:"",onChange:function(e){return b(e.target.value)}})))))),o.createElement(s.Z.Footer,null,o.createElement(c.Z,{variant:"primary",className:"w-100",onClick:function(){var e;null===(e=r.onHide)||void 0===e||e.call(),null==n||n.call(void 0,v,d),m(void 0)},"data-testid":"add-todo"},"Добавить")))};function I(e,t){var n,r=null===(n=e.find((function(e){return e.uid===t})))||void 0===n?void 0:n.parentUid;return r?1+I(e,r):0}D.propTypes={todos:l().array,onCreate:l().func},D.defaultProps={todos:[],onCreate:function(){}};var T=D,x={onCreate:function(e,t){return function(e,t){return{type:d.Tl,payload:{title:e,parentUid:t}}}(e,t)}},H=(0,r.$j)((function(e){return{todos:e.todos}}),x)(T);function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var N=function(e){var t,n,r=e.todos,a=(t=(0,o.useState)(!1),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,a=void 0;try{for(var l,i=e[Symbol.iterator]();!(r=(l=i.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==i.return||i.return()}finally{if(o)throw a}}return n}}(t,n)||function(e,t){if(e){if("string"==typeof e)return P(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?P(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=a[0],d=a[1];return o.createElement(i.default,{className:"d-flex flex-column justify-content-between h-100"},o.createElement(u.Z,{"data-testid":"todo-list",as:"ul"},$(r,U(r,void 0))),o.createElement(c.Z,{"data-testid":"add-item",variant:"primary",className:"mt-3",onClick:function(){return d(!0)}},"Добавить элемент"),o.createElement(H,{show:l,onHide:function(){return d(!1)},"data-testid":"modal"}))};function $(e,t){return function(e){return e.sort((function(e,t){return e.isDone===t.isDone?0:e.isDone?1:-1}))}(t).map((function(t,n){var r,a,l,i=t.uid&&U(e,t.uid);return o.createElement("div",{key:null!==(r=t.uid)&&void 0!==r?r:n,"data-testid":null!==(a=t.uid)&&void 0!==a?a:n},o.createElement(u.Z.Item,{as:"li",key:null!==(l=t.uid)&&void 0!==l?l:n},o.createElement(S,{isDone:t.isDone,todo:t})),i&&o.createElement("div",{className:"ml-3"},$(e,i)))}))}function U(e,t){return e.filter((function(e){return e.parentUid===t}))}N.propTypes={todos:l().array},N.defaultProps={todos:[]};var F=N,M=(0,r.$j)((function(e){return{todos:e.todos}}),null)(F)}}]);