{"version":3,"file":"42.chunk.js","sources":["webpack://todo_app/./src/state/todos/actions.js","webpack://todo_app/./src/components/DeleteItemModal.js","webpack://todo_app/./src/containers/DeleteItemModal.js","webpack://todo_app/./src/components/TodoItem.js","webpack://todo_app/./src/containers/TodoItem.js","webpack://todo_app/./src/components/AddItemModal.js","webpack://todo_app/./src/containers/AddItemModal.js","webpack://todo_app/./src/components/TodoList.js","webpack://todo_app/./src/containers/TodoList.js"],"sourcesContent":["import { ADD_TODO, REMOVE_TODO, MARK_TODO } from './types'\n\nexport function addTodo(title, parentUid) {\n  return {\n    type: ADD_TODO,\n    payload: { title, parentUid },\n  }\n}\n\nexport function removeTodo(uid) {\n  return {\n    type: REMOVE_TODO,\n    payload: uid,\n  }\n}\n\nexport function markTodo(uid, isDone) {\n  return {\n    type: MARK_TODO,\n    payload: { uid, isDone },\n  }\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Modal, Button, Col, Row, Container } from 'react-bootstrap'\n\nconst DeleteItemModal = ({ todo, onDelete, onHide, ...rest }) => {\n  return (\n    <Modal {...rest} animation={false} onHide={onHide} centered>\n      <Modal.Header>\n        <Modal.Title>Вы уверены, что хотите удалить элемент?</Modal.Title>\n      </Modal.Header>\n      <Modal.Footer>\n        <Container>\n          <Row>\n            <Col>\n              <Button\n                className='w-100'\n                variant='primary'\n                onClick={() => {\n                  onHide?.call(undefined)\n                  onDelete?.call(undefined, todo.uid)\n                }}\n                data-testid='delete-todo'>\n                Да\n              </Button>\n            </Col>\n            <Col>\n              <Button\n                className='w-100'\n                variant='secondary'\n                onClick={() => onHide?.call(undefined)}\n                data-testid='not-delete-todo'>\n                Нет\n              </Button>\n            </Col>\n          </Row>\n        </Container>\n      </Modal.Footer>\n    </Modal>\n  )\n}\n\nDeleteItemModal.propTypes = {\n  todo: PropTypes.object,\n  onDelete: PropTypes.func,\n  onHide: PropTypes.func,\n}\n\nDeleteItemModal.defaultProps = {\n  todo: {},\n  onDelete: () => {},\n  onHide: () => {},\n}\n\nexport default DeleteItemModal\n","import { connect } from 'react-redux'\n\nimport { removeTodo } from '../state/todos/actions'\n\nimport DeleteItemModal from '../components/DeleteItemModal'\n\nconst mapDispatchToProps = {\n  onDelete: (uid) => removeTodo(uid),\n}\n\nexport default connect(null, mapDispatchToProps)(DeleteItemModal)\n","import React, { useState } from 'react'\nimport PropTypes from 'prop-types'\nimport { Form, Container } from 'react-bootstrap'\n\nimport DeleteItemModal from '../containers/DeleteItemModal'\n\nconst TodoItem = ({ todo, markTodo }) => {\n  const [show, setShow] = useState(false)\n\n  return (\n    <>\n      <Container className='d-flex justify-content-start'>\n        <Form.Check\n          data-testid='item'\n          type='checkbox'\n          id={todo.uid}\n          label={todo.title}\n          value={todo.isDone || false}\n          className={todo.isDone ? 'marked' : ''}\n          onClick={() => {\n            markTodo?.call(undefined, todo.uid, !todo.isDone)\n          }}\n        />\n        {todo.isDone && (\n          <a\n            href='#'\n            className='pl-2 link-primary'\n            data-testid='delete-link'\n            onClick={(e) => {\n              e.preventDefault()\n              setShow(true)\n            }}>\n            Удалить\n          </a>\n        )}\n      </Container>\n      <DeleteItemModal todo={todo} show={show} onHide={() => setShow(false)} />\n    </>\n  )\n}\n\nTodoItem.propTypes = {\n  todo: PropTypes.object,\n  markTodo: PropTypes.func,\n}\n\nTodoItem.defaultProps = {\n  todo: {},\n  markTodo: () => {},\n}\n\nexport default TodoItem\n","import { connect } from 'react-redux'\n\nimport { markTodo } from '../state/todos/actions'\n\nimport TodoItem from '../components/TodoItem'\n\nconst mapDispatchToProps = {\n  markTodo: (uid, isDone) => markTodo(uid, isDone),\n}\n\nexport default connect(null, mapDispatchToProps)(TodoItem)\n","import React, { useEffect, useState } from 'react'\nimport PropTypes from 'prop-types'\nimport { Col, Form, Modal, Button } from 'react-bootstrap'\n\nconst AddItemModal = ({ todos, onCreate, ...rest }) => {\n  const [parents, setParents] = useState([])\n  const [parent, setParent] = useState()\n  const [title, setTitle] = useState('')\n\n  useEffect(() => {\n    setParents([\n      { title: 'Не выбрано' },\n      ...todos.filter((todo) => getParentCount(todos, todo.uid) < 2),\n    ])\n  }, [todos])\n\n  return (\n    <Modal {...rest} animation={false} centered>\n      <Modal.Header>\n        <Modal.Title>Добавить элемент</Modal.Title>\n      </Modal.Header>\n      <Modal.Body>\n        <Form\n          onSubmit={(e) => {\n            e.preventDefault()\n          }}>\n          <Form.Group controlId='parent-todo' data-testid='select-parent'>\n            <Form.Row>\n              <Col>\n                <Form.Label>Родительский элемент</Form.Label>\n              </Col>\n              <Col>\n                <Form.Control\n                  as='select'\n                  value={parent}\n                  onChange={(e) => {\n                    setParent(e.target.value)\n                  }}>\n                  {parents.map((todo, i) => {\n                    return (\n                      <option value={todo.uid} key={todo.uid ?? i}>\n                        {todo.title}\n                      </option>\n                    )\n                  })}\n                </Form.Control>\n              </Col>\n            </Form.Row>\n          </Form.Group>\n          <Form.Group controlId='title'>\n            <Form.Row>\n              <Col>\n                <Form.Label>Заголовок</Form.Label>\n              </Col>\n              <Col>\n                <Form.Control\n                  type=\"input'\"\n                  defaultValue=''\n                  onChange={(e) => setTitle(e.target.value)}\n                />\n              </Col>\n            </Form.Row>\n          </Form.Group>\n        </Form>\n      </Modal.Body>\n      <Modal.Footer>\n        <Button\n          variant='primary'\n          className='w-100'\n          onClick={() => {\n            rest.onHide?.call()\n            onCreate?.call(undefined, title, parent)\n            setParent(undefined)\n          }}\n          data-testid='add-todo'>\n          Добавить\n        </Button>\n      </Modal.Footer>\n    </Modal>\n  )\n}\n\nfunction getParentCount(todos, uid) {\n  const parentUid = todos.find((todo) => todo.uid === uid)?.parentUid\n  if (parentUid) {\n    return 1 + getParentCount(todos, parentUid)\n  } else {\n    return 0\n  }\n}\n\nAddItemModal.propTypes = {\n  todos: PropTypes.array,\n  onCreate: PropTypes.func,\n}\n\nAddItemModal.defaultProps = {\n  todos: [],\n  onCreate: () => {},\n}\n\nexport default AddItemModal\n","import { connect } from 'react-redux'\n\nimport { addTodo } from '../state/todos/actions'\n\nimport AddItemModal from '../components/AddItemModal'\n\nconst mapStateToProps = (state) => ({\n  todos: state.todos,\n})\n\nconst mapDispatchToProps = {\n  onCreate: (title, parentUid) => addTodo(title, parentUid),\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AddItemModal)\n","import React, { useState } from 'react'\nimport PropTypes from 'prop-types'\nimport { Button, Container, ListGroup } from 'react-bootstrap'\n\nimport TodoItem from '../containers/TodoItem'\nimport AddItemModal from '../containers/AddItemModal'\n\nconst TodoList = ({ todos }) => {\n  const [show, setShow] = useState(false)\n\n  return (\n    <Container className='d-flex flex-column justify-content-between h-100'>\n      <ListGroup data-testid='todo-list' as='ul'>\n        {getTodoList(todos, getTodoChildren(todos, undefined))}\n      </ListGroup>\n      <Button\n        data-testid='add-item'\n        variant='primary'\n        className='mt-3'\n        onClick={() => setShow(true)}>\n        Добавить элемент\n      </Button>\n      <AddItemModal show={show} onHide={() => setShow(false)} data-testid='modal' />\n    </Container>\n  )\n}\n\nfunction getTodoList(todos, children) {\n  return sortTodos(children).map((todo, i) => {\n    const childs = todo.uid && getTodoChildren(todos, todo.uid)\n    return (\n      <div key={todo.uid ?? i} data-testid={todo.uid ?? i}>\n        <ListGroup.Item as='li' key={todo.uid ?? i}>\n          <TodoItem isDone={todo.isDone} todo={todo} />\n        </ListGroup.Item>\n        {childs && <div className='ml-3'>{getTodoList(todos, childs)}</div>}\n      </div>\n    )\n  })\n}\n\nfunction sortTodos(todos) {\n  return todos.sort((a, b) => (a.isDone === b.isDone ? 0 : a.isDone ? 1 : -1))\n}\n\nfunction getTodoChildren(todos, uid) {\n  return todos.filter((todo) => todo.parentUid === uid)\n}\n\nTodoList.propTypes = {\n  todos: PropTypes.array,\n}\n\nTodoList.defaultProps = {\n  todos: [],\n}\n\nexport default TodoList\n","import { connect } from 'react-redux'\n\nimport TodoList from '../components/TodoList'\n\nconst mapStateToProps = (state) => {\n  return {\n    todos: state.todos,\n  }\n}\n\nexport default connect(mapStateToProps, null)(TodoList)\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAFA;AAIA;AAEA;AACA;AACA;AACA;AAFA;AAIA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAFA;AAIA;;;;;;;;;;;;;;;;ACrBA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAaA;AACA;AACA;AAAA;AAAA;AACA;AAJA;AAaA;AACA;AApCA;AAqCA;AACA;AACA;AACA;AAHA;AAMA;AACA;AACA;AACA;AAHA;AAMA;AACA;;;;;ACtDA;AAEA;AAEA;AAEA;AACA;AAAA;AAAA;AADA;AAIA;;;;;;;;;;;;;;;;ACVA;AACA;AACA;AAEA;AACA;AACA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAEA;AAEA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AATA;AAaA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAYA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AAlCA;AACA;AADA;AAmCA;AACA;AACA;AAFA;AAKA;AACA;AACA;AAFA;AAKA;AACA;;;;;ACpDA;AAEA;AAEA;AAEA;AACA;AAAA;AAAA;AADA;AAIA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACVA;AACA;AACA;AACA;AACA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAIA;AACA;AACA;AAAA;AACA;AAAA;AAEA;AAEA;AACA;AAAA;AAAA;AAMA;AACA;AACA;AAHA;AAIA;AAAA;AAAA;AAOA;AACA;AACA;AACA;AACA;AALA;AAMA;AACA;AAAA;AACA;AAAA;AAAA;AAIA;AAKA;AAAA;AAOA;AACA;AACA;AAAA;AAAA;AAHA;AAYA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AARA;AAcA;AACA;AA7EA;AACA;AADA;AACA;AA6EA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAKA;AACA;AACA;AAFA;AAKA;AACA;;;;;ACtGA;AAEA;AAEA;AACA;AACA;AAAA;AACA;AADA;AAAA;AACA;AAGA;AACA;AAAA;AAAA;AADA;AAIA;;;;;;;;;;;;;;;;ACdA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;AACA;AADA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AAAA;AACA;AAAA;AAAA;AAIA;AACA;AACA;AACA;AAAA;AAAA;AAJA;AAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AAnBA;AACA;AADA;AACA;AAmBA;AACA;AAAA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AAAA;AAGA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AADA;AAIA;AACA;AADA;AAIA;AACA;;;;;AC1DA;AAEA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;A;;A","sourceRoot":""}